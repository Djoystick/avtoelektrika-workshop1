<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–µ –∞–≤—Ç–æ - –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –ê–≤—Ç–æ—ç–ª–µ–∫—Ç—Ä–∏–∫–∞</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="logo">‚ö° –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –ê–≤—Ç–æ—ç–ª–µ–∫—Ç—Ä–∏–∫–∞</h1>
            <nav class="main-nav">
                <a href="/" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/vehicles.html" class="nav-link">üöó –ü–æ –º–∞—Ä–∫–∞–º</a>
                <a href="/error-codes.html" class="nav-link">üíª –ü–æ –æ—à–∏–±–∫–∞–º</a>
                <a href="/my-car.html" class="nav-link active">üì± –ú–æ–µ –∞–≤—Ç–æ</a>
            </nav>
        </header>

        <section class="page-content">
            <h2>üì± –ú–æ–µ –∞–≤—Ç–æ</h2>
            
            <div class="my-car-setup">
                <div class="form-group">
                    <label>–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ:</label>
                    <input id="my-brand" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, LADA">
                </div>
                
                <div class="form-group">
                    <label>–ú–æ–¥–µ–ª—å:</label>
                    <input id="my-model" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Granta">
                </div>
                
                <div class="form-group">
                    <label>–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:</label>
                    <input id="my-year" type="number" placeholder="2020">
                </div>
                
                <button onclick="saveMycar()" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>

            <div id="my-car-articles" class="articles-grid"></div>
        </section>
    </div>

    <script src="utils.js"></script>
    <script src="db-manager.js"></script>
    <script>
        let db;
        
        document.addEventListener('DOMContentLoaded', async () => {
            db = new DatabaseManager();
            await db.init();
            loadMycar();
        });
        
        function saveMycar() {
            const brand = document.getElementById('my-brand').value;
            const model = document.getElementById('my-model').value;
            const year = document.getElementById('my-year').value;
            
            localStorage.setItem('mycar', JSON.stringify({ brand, model, year }));
            loadMycar();
            alert('‚úÖ –ú–∞—à–∏–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }
        
        function loadMycar() {
            const stored = localStorage.getItem('mycar');
            if (stored) {
                const car = JSON.parse(stored);
                document.getElementById('my-brand').value = car.brand;
                document.getElementById('my-model').value = car.model;
                document.getElementById('my-year').value = car.year;
                
                const articles = db.searchByBrand(car.brand);
                document.getElementById('my-car-articles').innerHTML = articles.map(a => `
                    <div class="article-card">
                        <h4>${a.title}</h4>
                        <p>${a.contentType} ‚Ä¢ ${a.source}</p>
                        <a href="${a.link}" target="_blank" class="btn-read">–ß–∏—Ç–∞—Ç—å</a>
                    </div>
                `).join('');
            }
        }
    </script>
</body>
</html>
